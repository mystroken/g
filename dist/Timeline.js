var Timeline=function(){"use strict";function t(t){var i=t.length;return function(s){for(var n=0;n<i;n++)s(t[n],n)}}function i(t){this.cb=t,this.r=null,this.s=null,this.E=!1,this._t=this._t.bind(this)}function s(t,s){this.d=s,this.cb=t,this.loop=this.loop.bind(this),this.rAF=new i(this.loop)}function n(t){this.list=[],this.length=0,this.d=0,this.cb=t.cb||null,this.v={cllBckDly:null},Object.defineProperty(this,"duration",{get:function(){return this.d}})}return i.prototype.run=function(){this.E=!1,this.s=performance.now(),this.r=requestAnimationFrame(this._t)},i.prototype.stop=function(){this.E=!0,cancelAnimationFrame(this.r)},i.prototype._t=function(t){this.E||(this.cb(t-this.s),this.r=requestAnimationFrame(this._t))},s.prototype={run:function(){0===this.d?this.cb():this.rAF.run()},stop:function(){this.rAF.stop()},loop:function(t){var i,s,n;(i=t,s=0,n=this.d,Math.min(Math.max(i,s),n))===this.d&&(this.stop(),this.cb())}},n.prototype={add:function(t,i){var n=this.length<=0?0:i||0,h=this.d+n;h<0&&(h=0);var l=new s((function(){t.play()}),h);return this.list.push({a:t,d:l}),this.length=this.list.length,this.d=h+t.duration,null!==this.cb&&(this.v.cllBckDly=null,this.v.cllBckDly=new s(this.cb,this.d)),this},play:function(){this.v.cllBckDly&&this.v.cllBckDly.run(),t(this.list)((function(t){t.d.run()}))},pause:function(){this.v.cllBckDly&&this.v.cllBckDly.stop(),t(this.list)((function(t){t.d.stop(),t.a.pause()}))},reset:function(){this.v.cllBckDly&&this.v.cllBckDly.stop(),t(this.list)((function(t){t.d.stop(),t.a.pause(),t.a.reset()}))},stop:function(){this.v.cllBckDly&&this.v.cllBckDly.stop(),t(this.list)((function(t){t.d.stop(),t.a.pause()}))}},n}();
